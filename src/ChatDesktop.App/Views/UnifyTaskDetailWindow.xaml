<Window x:Class="ChatDesktop.App.Views.UnifyTaskDetailWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:md="clr-namespace:Markdig.Wpf;assembly=Markdig.Wpf"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="任务详情" Height="560" Width="760" WindowStartupLocation="CenterOwner"
        Background="#F4F6FA">
  <Grid Margin="16">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <Border Grid.Row="0" Background="White" CornerRadius="12" Padding="16"
            BorderBrush="#E6E9F0" BorderThickness="1"
            materialDesign:ShadowAssist.ShadowDepth="Depth1">
      <StackPanel>
        <TextBlock Text="{Binding Title}" FontSize="18" FontWeight="SemiBold" />
        <WrapPanel Margin="0,10,0,0">
          <Border Background="#E8EAF6" CornerRadius="8" Padding="8,2" Margin="0,0,6,6">
            <TextBlock Text="{Binding AssignedTo, StringFormat=派发给 {0}}" Foreground="#5C6BC0" />
          </Border>
          <Border Background="#E3F2FD" CornerRadius="8" Padding="8,2" Margin="0,0,6,6">
            <TextBlock Text="{Binding AssignedBy, StringFormat=派发人 {0}}" Foreground="#1E88E5" />
          </Border>
          <Border Background="#ECEFF1" CornerRadius="8" Padding="8,2" Margin="0,0,6,6">
            <TextBlock Text="{Binding DueDate, StringFormat=到期 {0:yyyy-MM-dd HH:mm}}" Foreground="#607D8B" />
          </Border>
        </WrapPanel>
      </StackPanel>
    </Border>

    <Border Grid.Row="1" Margin="0,12,0,12" Background="White" CornerRadius="12" Padding="16"
            BorderBrush="#E6E9F0" BorderThickness="1"
            materialDesign:ShadowAssist.ShadowDepth="Depth1">
      <ScrollViewer>
        <StackPanel>
          <TextBlock Text="任务描述" FontWeight="SemiBold" Margin="0,0,0,6" />
          <md:MarkdownViewer Markdown="{Binding Description}" Background="Transparent" />
          <TextBlock Text="标签" FontWeight="SemiBold" Margin="0,12,0,6" />
          <TextBlock Text="{Binding Tags}" />
        </StackPanel>
      </ScrollViewer>
    </Border>

    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
      <Button Style="{StaticResource MaterialDesignOutlinedButton}" Content="标记已读" Command="{Binding MarkReadCommand}" Margin="0,0,8,0" />
      <Button Style="{StaticResource MaterialDesignRaisedButton}" Content="完成" Command="{Binding CompleteCommand}" Margin="0,0,8,0" />
      <Button Style="{StaticResource MaterialDesignFlatButton}" Content="关闭" Command="{Binding CloseCommand}" />
    </StackPanel>
  </Grid>
</Window>
