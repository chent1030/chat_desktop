<Window x:Class="ChatDesktop.App.Views.TaskDetailWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:md="clr-namespace:Markdig.Wpf;assembly=Markdig.Wpf"
        Title="任务详情" Height="520" Width="720" WindowStartupLocation="CenterOwner">
  <Grid Margin="16">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <StackPanel Grid.Row="0">
      <TextBlock Text="{Binding Title}" FontSize="18" FontWeight="Bold" />
      <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
        <TextBlock Text="截止: " />
        <TextBlock Text="{Binding DueDate}" />
        <TextBlock Text="  | 已读: " Margin="8,0,0,0" />
        <TextBlock Text="{Binding IsRead}" />
        <TextBlock Text="  | 完成: " Margin="8,0,0,0" />
        <TextBlock Text="{Binding IsCompleted}" />
      </StackPanel>
      <TextBlock Text="{Binding Tags}" Foreground="#666" Margin="0,8,0,0" />
    </StackPanel>

    <Border Grid.Row="1" Margin="0,12,0,12" BorderBrush="#E5E5E5" BorderThickness="1" Padding="12" Background="#FFFFFF">
      <Grid>
        <md:MarkdownViewer Markdown="{Binding Description}"
                           Visibility="{Binding Description, Converter={StaticResource StringNotEmptyToVisibilityConverter}}" />
        <TextBlock Text="无描述" Foreground="#888" HorizontalAlignment="Center" VerticalAlignment="Center"
                   Visibility="{Binding Description, Converter={StaticResource StringNotEmptyToVisibilityConverter}, ConverterParameter=Invert}" />
      </Grid>
    </Border>

    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
      <Button Content="关闭" Command="{Binding CloseCommand}" Margin="0,0,8,0" />
      <Button Content="任务派发" Command="{Binding DispatchCommand}" Margin="0,0,8,0"
              Visibility="{Binding AllowDispatch, Converter={StaticResource BooleanToVisibilityConverter}}" />
      <Button Content="处理" Command="{Binding HandleCommand}"
              Visibility="{Binding CanHandle, Converter={StaticResource BooleanToVisibilityConverter}}" />
    </StackPanel>
  </Grid>
</Window>
